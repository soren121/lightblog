/* 
 * imValidateForm version 1.1
 * jQuery Form Validation plug-in version 1.1
 * @author Les Green
 * Copyright (c) 2008 Intriguing Minds, Inc.
 * http://www.intriguingminds.com/
 */
if(!window.jQuery){throw("jQuery hasn't been called yet!");}else{;(function($){var canSubmit=true;var resultMsg='';var message='';var aMessages=new Array();aMessages["hasValue"]=" cannot be blank";aMessages["isValidEmail"]=" is not a valid";aMessages["eitherOr"]=" must be entered";aMessages["isEqual"]=" does not match";aMessages["isChecked"]=" must be selected";aMessages["isNum"]=" must be numeric";aMessages["isAlpha"]=" must contain alphas only";aMessages["greaterThanZero"]=" must be selected";$.fn.extend({imValidateForm:function(options){opts=$.extend({},defaults,options);$this=$(this);if(opts.submit_button!=''){$('#'+opts.submit_button).attr('disabled','disabled');}
if(opts.ajax_success){if((opts.ajax_success.func)&&(opts.ajax_success.listener)){$('#'+opts.ajax_success.listener).ajaxSuccess(function(evt,request,settings){if(!resultMsg.match("Error:")){var pVal='';$.each(opts.ajax_success.func,function(i,itm){var fn=eval(itm.name);if(itm.params){$.each(itm.params,function(j,prm){pVal+=prm.param+", ";});pVal=pVal.substr(0,pVal.length-2);fn(pVal);}else{fn();}});}});}}
doValidate();}});var defaults={responseDiv:'',validate_func:'validateFields',validate_map:'',url:'',data_type:'json',ajax_success:'',complete:'',submit_button:''};function doValidate(){var formData=getFormValues(opts.validate_func);if(canSubmit){$.ajax({type:"POST",url:opts.url,data:formData,dataType:opts.data_type,success:showMessage});}else{showMessage(message);}};function dbDupCheck(){var str="";$.each(opts.validate_map.fields[0].rules[0].fields,function(i,itm){str+="&"+itm.id+"="+escape($(itm.id).val())+"&";});str=str.substr(0,str.length-1);return str;};function getFormValues(fncName){var str="";var fn=eval(fncName);$(':input',$this).each(function(i){if((fn)&&(opts.validate_map!='')){message+=fn(this);}
if((this.type=='radio')||(this.type=='checkbox')){if(this.checked){str+=this.name+"="+escape(this.value)+"&";}}else{str+=this.name+"="+escape(this.value)+"&";}});str=str.substr(0,str.length-1);message={"type":"message","label":""+message+""};return str;};function validateFields(el){var msg='';var bSubmit=false;$.each(opts.validate_map.fields,function(i,itm){if(itm.id==el.name){$.each(itm.rules,function(j,rule){var fn=eval(rule.name);if(rule.fields){bSubmit=fn(el.value,rule.fields);}else if(rule.exclude){bSubmit=fn(el.value,rule.exclude)}else if((rule.value)&&(rule.condition)){bSubmit=fn(el.value,rule.value,rule.condition)}else{bSubmit=fn(el.value);}
if(!bSubmit){msg+=itm.label+aMessages[rule.name]+"<br />";canSubmit=false;}});}});return msg;};function hasValue(val){if(arguments.length>1){var retVal=((val==arguments[1])||(val==""))?false:true;}else{var retVal=(val=="")?false:true;}
return retVal;};function isValidEmail(val){var filter=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i
if(filter.test(val)){return true;}else{return false;}};function eitherOr(val,fields){var isNotEmpty=false;if(hasValue(val)){isNotEmpty=true;}else{$.each(fields,function(i,itm){if(hasValue($('#'+itm.id).val())){isNotEmpty=true;return false;}});}
return isNotEmpty;};function isChecked(val,fields){var ischecked=false;if(fields[0].id=='all'){ischecked=isCheckedForm();}else{$.each(fields,function(i,itm){if($("#"+itm+":checked")){ischecked=true;return false;}});}
return ischecked;};function isCheckedForm(){var nL=$("input:checked",$this).length;var ischecked=(nL>0)?true:false;return ischecked;};function isEqual(val,fields){var bEqual=(val==$('#'+fields[0].id).val())?true:false;return bEqual;};function isNum(val){var patt=/\D/;var retVal=(patt.test(val))?false:true;return retVal;};function isAlpha(val){var patt=/[^A-Z]/i;var retVal=(patt.test(val))?false:true;return retVal;};function isAlphaNumeric(val){var patt=/\W/;var retVal=(patt.test(val))?false:true;return retVal;};function meetsCondition(val,compVal,condition){var retVal=false;switch(condition){case"==":retVal=(val==compVal)?true:false;break;case"!=":retVal=(val!=compVal)?true:false;break;case"<":retVal=(val<compVal)?true:false;break;case"<=":retVal=(val<=compVal)?true:false;break;case">":retVal=(val>compVal)?true:false;break;case">=":retVal=(val>=compVal)?true:false;break;}
return retVal;};function showMessage(result){var loc='';if(opts.submit_button!=''){$('#'+opts.submit_button).attr('disabled','');}
if(opts.complete){var fn=eval(opts.complete);fn(result);}else if(result.type){if(result.type=='message'){resultMsg=result.label;$("#"+opts.responseDiv).html(result.label);}else if(result.type=='continue'){loc+=result.label;if(result.params){loc+='?';$.each(result.params,function(i,itm){loc+=itm.name+'='+itm.value+'&';});loc=loc.substr(0,loc.length-1);}
location.href=loc;}}else{$("#"+opts.responseDiv).html(result);}};function goTo(loc){location.href=loc;};})(jQuery);}